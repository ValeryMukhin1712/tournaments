üîí –ü–õ–ê–ù –ù–ê–°–¢–†–û–ô–ö–ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò –°–ï–†–í–ï–†–ê UBUNTU
=====================================================

üìã –û–ë–ó–û–†:
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ VDS —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ–ø–ª–æ—è Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–æ–≤.
–í–∫–ª—é—á–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –±–ª–æ–∫–∏—Ä–æ–≤–∫—É root, –Ω–∞—Å—Ç—Ä–æ–π–∫—É SSH –∏ —Ñ–∞–π—Ä–≤–æ–ª–∞.

‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û - –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø:
1. –°–ù–ê–ß–ê–õ–ê —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ SSH –∫–ª—é—á
2. –ü–û–¢–û–ú –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥ –ø–æ–¥ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º  
3. –¢–û–õ–¨–ö–û –ü–û–°–õ–ï —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∏ –∑–∞–±–ª–æ–∫–∏—Ä—É–π—Ç–µ root

üõ°Ô∏è –ü–û–®–ê–ì–û–í–´–ô –ü–õ–ê–ù:

1. –°–û–ó–î–ê–ù–ò–ï –ù–û–í–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –° SUDO –ü–†–ê–í–ê–ú–ò
------------------------------------------------
# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo adduser tournament-admin

# –î–æ–±–∞–≤–ª—è–µ–º –≤ –≥—Ä—É–ø–ø—É sudo
sudo usermod -aG sudo tournament-admin

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä—É–ø–ø—ã
groups tournament-admin

2. –ù–ê–°–¢–†–û–ô–ö–ê SSH –ö–õ–Æ–ß–ï–ô (–í–ú–ï–°–¢–û –ü–ê–†–û–õ–ï–ô)
-----------------------------------------
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è SSH –∫–ª—é—á–µ–π
sudo mkdir -p /home/tournament-admin/.ssh
sudo chmod 700 /home/tournament-admin/.ssh

# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª authorized_keys
sudo touch /home/tournament-admin/.ssh/authorized_keys
sudo chmod 600 /home/tournament-admin/.ssh/authorized_keys
sudo chown -R tournament-admin:tournament-admin /home/tournament-admin/.ssh

3. –ù–ê–°–¢–†–û–ô–ö–ê SSH –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
-----------------------------
# –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.backup

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥
sudo nano /etc/ssh/sshd_config

–ö–õ–Æ–ß–ï–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò SSH:
-----------------------
# –û—Ç–∫–ª—é—á–∞–µ–º root –ª–æ–≥–∏–Ω
PermitRootLogin no

# –û—Ç–∫–ª—é—á–∞–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –ø–∞—Ä–æ–ª—é
PasswordAuthentication no
PubkeyAuthentication yes

# –ú–µ–Ω—è–µ–º –ø–æ—Ä—Ç SSH (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
Port 2222

# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
AllowUsers tournament-admin

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
MaxAuthTries 3
ClientAliveInterval 300
ClientAliveCountMax 2

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º SSH —Å–µ—Ä–≤–∏—Å
sudo systemctl restart sshd

4. –ù–ê–°–¢–†–û–ô–ö–ê –§–ê–ô–†–í–û–õ–ê UFW
-------------------------
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º UFW
sudo apt update
sudo apt install ufw -y

# –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞
sudo ufw --force reset

# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
sudo ufw default deny incoming
sudo ufw default allow outgoing

# –†–∞–∑—Ä–µ—à–∞–µ–º SSH (–Ω–∞ –Ω–æ–≤–æ–º –ø–æ—Ä—Ç—É)
sudo ufw allow 2222/tcp

# –†–∞–∑—Ä–µ—à–∞–µ–º HTTP –∏ HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# –í–∫–ª—é—á–∞–µ–º —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw --force enable

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo ufw status verbose

5. –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–ï–†–´ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò
-----------------------------------
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º fail2ban
sudo apt install fail2ban -y

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º fail2ban –¥–ª—è SSH
sudo nano /etc/fail2ban/jail.local

–ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø FAIL2BAN:
----------------------
[DEFAULT]
bantime = 3600
findtime = 600
maxretry = 3

[sshd]
enabled = true
port = 2222
filter = sshd
logpath = /var/log/auth.log
maxretry = 3
bantime = 3600

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º fail2ban
sudo systemctl restart fail2ban
sudo systemctl enable fail2ban

6. –ë–õ–û–ö–ò–†–û–í–ö–ê ROOT –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
-------------------------------
# –ë–ª–æ–∫–∏—Ä—É–µ–º root –∞–∫–∫–∞—É–Ω—Ç
sudo passwd -l root

# –ò–ª–∏ –±–æ–ª–µ–µ –º—è–≥–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç - –æ—Ç–∫–ª—é—á–∞–µ–º SSH –¥–æ—Å—Ç—É–ø
# (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –≤ sshd_config: PermitRootLogin no)

üîë –ì–ï–ù–ï–†–ê–¶–ò–Ø SSH –ö–õ–Æ–ß–ï–ô (–ù–ê –õ–û–ö–ê–õ–¨–ù–û–ú –ö–û–ú–ü–¨–Æ–¢–ï–†–ï)
=================================================
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SSH –∫–ª—é—á
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

# –ö–æ–ø–∏—Ä—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id -p 22 tournament-admin@YOUR_SERVER_IP

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á –≤ authorized_keys
cat ~/.ssh/id_rsa.pub | ssh tournament-admin@YOUR_SERVER_IP "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"

üìã –ß–ï–ö-–õ–ò–°–¢ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò
========================
- ‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å sudo –ø—Ä–∞–≤–∞–º–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã SSH –∫–ª—é—á–∏ (–æ—Ç–∫–ª—é—á–µ–Ω—ã –ø–∞—Ä–æ–ª–∏)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—Ç SSH (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ–∞–π—Ä–≤–æ–ª UFW
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω fail2ban
- ‚úÖ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω root –¥–æ—Å—Ç—É–ø
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –≤—Ö–æ–¥ –ø–æ–¥ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

üö® –í–ê–ñ–ù–´–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø
========================
1. –ù–ï –ó–ê–ö–†–´–í–ê–ô–¢–ï —Ç–µ–∫—É—â—É—é SSH —Å–µ—Å—Å–∏—é –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥ –ø–æ–¥ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
3. –°–û–•–†–ê–ù–ò–¢–ï —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é sshd_config
4. –ü–†–û–í–ï–†–¨–¢–ï —á—Ç–æ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å sudo –∫–æ–º–∞–Ω–¥—ã

üîß –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
===============
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ö–æ–¥ –ø–æ–¥ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
ssh -p 2222 tournament-admin@YOUR_SERVER_IP

# –ü—Ä–æ–≤–µ—Ä—è–µ–º sudo –ø—Ä–∞–≤–∞
sudo whoami

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw status

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å fail2ban
sudo fail2ban-client status

üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
==============================
1. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É: sudo apt update && sudo apt upgrade
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ SSH –∫–ª—é—á–∏ (4096 –±–∏—Ç)
4. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏: sudo journalctl -f
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É
6. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 2FA –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò
=================
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.11+ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (Nginx + Gunicorn)

–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: $(date)
–í–µ—Ä—Å–∏—è: 1.0

