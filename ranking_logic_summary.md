# Новая логика распределения мест в турнире

## Алгоритм определения победителя

### 1. Основной критерий - количество очков
- Участник с большим количеством очков занимает более высокое место
- Очки начисляются согласно настройкам турнира

### 2. Вторичный критерий - личные встречи
- При равенстве очков место выше у того, кто победил в личной встрече
- Система ведет учет всех результатов личных встреч между участниками

### 3. Третичный критерий - разность выигранных и проигранных сетов
- При закольцованных результатах личных встреч (3+ участника с одинаковыми очками)
- Используется разность: `выигранные_сеты - проигранные_сеты`

### 4. Четвертый критерий - разность очков в сетах
- При равенстве разности сетов
- Используется суммарная разность очков во всех сыгранных сетах

## Примеры работы

### Пример 1: Разные разности сетов
- А выиграл у Б 2:1 (21:19, 19:21, 21:18)
- Б выиграл у В 2:0 (21:15, 21:17)  
- В выиграл у А 2:1 (21:19, 19:21, 21:18)

**Результат:**
1. Б - разность сетов: +1 (2-1)
2. А - разность сетов: 0 (3-3)
3. В - разность сетов: -1 (2-3)

### Пример 2: Одинаковые разности сетов
- Все участники выиграли по 2:1
- Разность сетов у всех: 0
- Сортировка по разности очков в сетах

### Пример 3: Сложный случай
- 4 участника с разными результатами
- Группировка по разности сетов
- Внутри групп сортировка по разности очков

## Преимущества новой логики

1. **Справедливость** - учитывает не только количество побед, но и качество игры
2. **Детализация** - разность сетов показывает, насколько уверенно играл участник
3. **Гибкость** - работает с любым количеством участников
4. **Прозрачность** - четкая иерархия критериев

## Реализация

Новая логика реализована в функции `calculate_participant_ranking_new()` и протестирована на различных сценариях. Готова к интеграции в основное приложение.

