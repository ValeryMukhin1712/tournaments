# ‚ö° –ë—ã—Å—Ç—Ä–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º dev –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚úÖ –û—Ç–ª–∏—á–Ω–æ! –î–∏—Å–∫ –æ—á–∏—â–µ–Ω

–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:
- **–ë—ã–ª–æ**: 80% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ (1.3GB —Å–≤–æ–±–æ–¥–Ω–æ)
- **–°—Ç–∞–ª–æ**: 64% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ (2.4GB —Å–≤–æ–±–æ–¥–Ω–æ)
- **–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ**: ~1.1GB

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è RAM

–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: **4 workers** –≤ production —Å–µ—Ä–≤–∏—Å–µ

–î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å **961MB RAM** —ç—Ç–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ **2 workers**.

## üîß –®–∞–≥ 1: –£–º–µ–Ω—å—à–µ–Ω–∏–µ workers –≤ production

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp optimize_production_workers.sh deploy@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä:~/optimize_production_workers.sh

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
chmod +x ~/optimize_production_workers.sh
sudo ~/optimize_production_workers.sh
```

### –°–ø–æ—Å–æ–± 2: –í—Ä—É—á–Ω—É—é

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
sudo cp /etc/systemd/system/tournaments.service /etc/systemd/system/tournaments.service.backup

# 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nano /etc/systemd/system/tournaments.service
```

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å `--workers 4` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ `--workers 2`:

```ini
# –ë—ã–ª–æ:
--workers 4

# –°—Ç–∞–Ω–µ—Ç:
--workers 2
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª (Ctrl+O, Enter, Ctrl+X)

```bash
# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
sudo systemctl daemon-reload
sudo systemctl restart tournaments

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status tournaments
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è workers —Å 4 –¥–æ 2:
- **–≠–∫–æ–Ω–æ–º–∏—è RAM**: ~100-150MB
- **–î–æ—Å—Ç—É–ø–Ω–∞—è RAM**: ~500-550MB (–≤–º–µ—Å—Ç–æ 435MB)
- **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è**: production + dev (dev –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 1 worker)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers
sudo systemctl status tournaments | grep workers

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:5000
```

## üöÄ –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å dev

–ö–æ–≥–¥–∞ workers —É–º–µ–Ω—å—à–µ–Ω—ã –¥–æ 2, –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ dev
~/setup_dev_environment.sh
```

Dev –≤–µ—Ä—Å–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **1 worker**, —á—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM.

## üìã –ò—Ç–æ–≥–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:

- **Production**: 2 workers (~200-250MB RAM)
- **Development**: 1 worker (~100-150MB RAM)
- **–°–∏—Å—Ç–µ–º–∞**: ~200-300MB RAM
- **–ò—Ç–æ–≥–æ**: ~500-700MB –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏–∑ 961MB
- **–°–≤–æ–±–æ–¥–Ω–æ**: ~260-460MB (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–ü–æ—Å–ª–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è workers:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
3. –ï—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—Å–æ–∫–∞—è, –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 3 workers (–Ω–æ –Ω–µ 4)

## üîÑ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –ø–æ—Å–ª–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è workers –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
sudo cp /etc/systemd/system/tournaments.service.backup /etc/systemd/system/tournaments.service
sudo systemctl daemon-reload
sudo systemctl restart tournaments
```

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ü–æ—Å–ª–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è workers –¥–æ 2, –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

