{% extends "base.html" %}

{% block title %}–¢—É—Ä–Ω–∏—Ä–Ω—ã–π –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç{% endblock %}

{% block content %}
<style>
:root {
    /* –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ —Ç–µ–º—ã - –°–µ—Ä—ã–π */
    --primary-color: #607d8b;
    --primary-light: #90a4ae;
    --primary-dark: #455a64;
    --accent-color: #78909c;
    --accent-light: #b0bec5;
    
    /* –§–æ–Ω–æ–≤—ã–µ —Ü–≤–µ—Ç–∞ */
    --bg-primary: #f5f5f5;
    --bg-secondary: #fafafa;
    --bg-card: #ffffff;
    --bg-card-hover: #eeeeee;
    
    /* –ì—Ä–∞–Ω–∏—Ü—ã –∏ —Ç–µ–Ω–∏ */
    --border-color: #bdbdbd;
    --shadow-color: rgba(96, 125, 139, 0.1);
    --shadow-hover: rgba(96, 125, 139, 0.15);
    --shadow-strong: rgba(96, 125, 139, 0.3);
    
    /* –ü–ª–∞–≤–∞—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
    --float-color: rgba(96, 125, 139, 0.1);
}

body {
    background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
    min-height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: all 0.3s ease;
}

.main-container {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    box-shadow: 0 20px 40px var(--shadow-color);
    margin: 2rem auto;
    padding: 2rem;
    transition: all 0.3s ease;
}

.hero-title {
    background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
    margin-bottom: 1rem;
    text-shadow: 0 2px 4px var(--shadow-color);
}

.card-modern {
    background: linear-gradient(145deg, var(--bg-card), var(--bg-primary));
    border: 2px solid var(--border-color);
    border-radius: 15px;
    box-shadow: 
        0 8px 16px var(--shadow-color),
        inset 0 1px 0 rgba(255, 255, 255, 0.8),
        inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    overflow: hidden;
    position: relative;
    cursor: pointer;
}

.card-modern::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.card-modern:hover::before {
    transform: scaleX(1);
}

.card-modern:hover {
    transform: translateY(-5px);
    background: linear-gradient(145deg, var(--bg-card-hover), var(--bg-secondary));
    box-shadow: 
        0 12px 24px var(--shadow-hover),
        inset 0 1px 0 rgba(255, 255, 255, 0.9),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

.icon-gradient {
    background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —ç–º–æ–¥–∑–∏-–∏–∫–æ–Ω–æ–∫ */
.role-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    transition: all 0.3s ease;
    filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.1));
}

.card-modern:hover .role-icon {
    transform: scale(1.1);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∫–æ–Ω–æ–∫ */
@media (min-width: 576px) {
    .role-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }
}

.btn-gradient {
    background: linear-gradient(45deg, var(--primary-color), var(--primary-light));
    border: none;
    border-radius: 25px;
    color: white;
    padding: 0.5rem 1.5rem;
    transition: all 0.3s ease;
}

.btn-gradient:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px var(--shadow-strong);
    color: white;
}

/* –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –ø—É–ª—å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ - –∫–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –ø–æ –æ—á–µ—Ä–µ–¥–∏ */
.pulse-animation {
    animation: pulse-sequence 4s infinite;
    transition: all 0.3s ease-in-out;
}

/* –ö–Ω–æ–ø–∫–∞ 1 - –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –≤ –Ω–∞—á–∞–ª–µ —Ü–∏–∫–ª–∞ (0-4s) */
.pulse-delay-1 {
    animation: pulse-button-1 16s infinite;
    transition: all 0.3s ease-in-out;
}

/* –ö–Ω–æ–ø–∫–∞ 2 - –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –≤–æ –≤—Ç–æ—Ä–æ–π —á–µ—Ç–≤–µ—Ä—Ç–∏ (4-8s) */
.pulse-delay-2 {
    animation: pulse-button-2 16s infinite;
    transition: all 0.3s ease-in-out;
}

/* –ö–Ω–æ–ø–∫–∞ 3 - –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –≤ —Ç—Ä–µ—Ç—å–µ–π —á–µ—Ç–≤–µ—Ä—Ç–∏ (12-16s) */
.pulse-delay-3 {
    animation: pulse-button-3 16s infinite;
    transition: all 0.3s ease-in-out;
}

/* –ö–Ω–æ–ø–∫–∞ 4 - –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –≤ —á–µ—Ç–≤–µ—Ä—Ç–æ–π —á–µ—Ç–≤–µ—Ä—Ç–∏ (8-12s) */
.pulse-delay-4 {
    animation: pulse-button-4 16s infinite;
    transition: all 0.3s ease-in-out;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ 1 (0-4s) - –≤–µ—Ä—Ö–Ω—è—è –ª–µ–≤–∞—è */
@keyframes pulse-button-1 {
    0%, 25% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
    12.5%, 20% {
        transform: scale(1.08);
        box-shadow: 
            0 15px 30px var(--shadow-hover),
            inset 0 2px 0 rgba(255, 255, 255, 0.9),
            inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    }
    25%, 100% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ 2 (4-8s) - –≤–µ—Ä—Ö–Ω—è—è –ø—Ä–∞–≤–∞—è */
@keyframes pulse-button-2 {
    0%, 25% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
    37.5%, 45% {
        transform: scale(1.08);
        box-shadow: 
            0 15px 30px var(--shadow-hover),
            inset 0 2px 0 rgba(255, 255, 255, 0.9),
            inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    }
    50%, 100% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ 3 (12-16s) - –Ω–∏–∂–Ω—è—è –ª–µ–≤–∞—è */
@keyframes pulse-button-3 {
    0%, 75% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
    87.5%, 95% {
        transform: scale(1.08);
        box-shadow: 
            0 15px 30px var(--shadow-hover),
            inset 0 2px 0 rgba(255, 255, 255, 0.9),
            inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    }
    100% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ 4 (8-12s) - –Ω–∏–∂–Ω—è—è –ø—Ä–∞–≤–∞—è */
@keyframes pulse-button-4 {
    0%, 50% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
    62.5%, 70% {
        transform: scale(1.08);
        box-shadow: 
            0 15px 30px var(--shadow-hover),
            inset 0 2px 0 rgba(255, 255, 255, 0.9),
            inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    }
    75%, 100% {
        transform: scale(1);
        box-shadow: 
            0 8px 16px var(--shadow-color),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    }
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 600px) {
    .main-container {
        margin: 1rem auto;
        padding: 1.5rem;
    }
    
    .hero-title {
        font-size: 2rem;
        margin-bottom: 1.5rem;
    }
    
    .card-title-mobile {
        font-size: 1rem;
        line-height: 1.2;
        margin-bottom: 0.5rem;
    }
    
    .card-modern {
        margin-bottom: 1rem;
    }
    
    .card-modern .card-body {
        padding: 1rem !important;
    }
    
    /* –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –ø—É–ª—å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    .pulse-delay-1 {
        animation: pulse-mobile-1 16s infinite;
    }
    
    .pulse-delay-2 {
        animation: pulse-mobile-2 16s infinite;
    }
    
    .pulse-delay-3 {
        animation: pulse-mobile-3 16s infinite;
    }
    
    .pulse-delay-4 {
        animation: pulse-mobile-4 16s infinite;
    }
    
    /* –ú–æ–±–∏–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏ - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å 1-2-4-3 */
    @keyframes pulse-mobile-1 {
        0%, 25% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
        12.5%, 20% {
            transform: scale(1.05);
            box-shadow: 
                0 10px 20px var(--shadow-hover),
                inset 0 2px 0 rgba(255, 255, 255, 0.9),
                inset 0 -2px 0 rgba(0, 0, 0, 0.1);
        }
        25%, 100% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
    }
    
    @keyframes pulse-mobile-2 {
        0%, 25% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
        37.5%, 45% {
            transform: scale(1.05);
            box-shadow: 
                0 10px 20px var(--shadow-hover),
                inset 0 2px 0 rgba(255, 255, 255, 0.9),
                inset 0 -2px 0 rgba(0, 0, 0, 0.1);
        }
        50%, 100% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
    }
    
    @keyframes pulse-mobile-3 {
        0%, 75% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
        87.5%, 95% {
            transform: scale(1.05);
            box-shadow: 
                0 10px 20px var(--shadow-hover),
                inset 0 2px 0 rgba(255, 255, 255, 0.9),
                inset 0 -2px 0 rgba(0, 0, 0, 0.1);
        }
        100% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
    }
    
    @keyframes pulse-mobile-4 {
        0%, 50% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
        62.5%, 70% {
            transform: scale(1.05);
            box-shadow: 
                0 10px 20px var(--shadow-hover),
                inset 0 2px 0 rgba(255, 255, 255, 0.9),
                inset 0 -2px 0 rgba(0, 0, 0, 0.1);
        }
        75%, 100% {
            transform: scale(1);
            box-shadow: 
                0 6px 12px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
    }
    
    /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
    .row.g-4 {
        --bs-gutter-x: 1.5rem;
        --bs-gutter-y: 1.5rem;
    }
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–∞–ª–æ–∂–µ–Ω–∏—è */
    .col-6 {
        margin-bottom: 1rem;
    }
    
}

/* –û—Ç—Å—Ç—É–ø—ã –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (min-width: 768px) and (max-width: 1199px) {
    .row.g-4 {
        margin-left: calc(50% - 250px) !important; /* –ü–æ–ª–æ–≤–∏–Ω–∞ —à–∏—Ä–∏–Ω—ã –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
        margin-right: calc(50% - 250px) !important;
        max-width: 500px !important;
    }
}

/* –û—Ç—Å—Ç—É–ø—ã –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ - –ø–æ–ª–æ–≤–∏–Ω–∞ —à–∏—Ä–∏–Ω—ã –∫–Ω–æ–ø–∫–∏ */
@media (min-width: 1200px) {
    .row.g-4 {
        margin-left: calc(50% - 300px) !important; /* –ü–æ–ª–æ–≤–∏–Ω–∞ —à–∏—Ä–∏–Ω—ã –∫–Ω–æ–ø–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ 300px) */
        margin-right: calc(50% - 300px) !important;
        max-width: 600px !important; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É */
    }
}

@media (min-width: 1400px) {
    .row.g-4 {
        margin-left: calc(50% - 350px) !important; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ—Ç—Å—Ç—É–ø –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        margin-right: calc(50% - 350px) !important;
        max-width: 700px !important;
    }
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
.row.g-4 {
    --bs-gutter-x: 2rem;
    --bs-gutter-y: 2rem;
}

/* –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø—É–ª—å—Å–∏—Ä–æ–≤–∞–Ω–∏—è */
@media (min-width: 601px) {
    .pulse-delay-1 {
        animation: pulse-desktop-1 16s infinite;
    }
    
    .pulse-delay-2 {
        animation: pulse-desktop-2 16s infinite;
    }
    
    .pulse-delay-3 {
        animation: pulse-desktop-3 16s infinite;
    }
    
    .pulse-delay-4 {
        animation: pulse-desktop-4 16s infinite;
    }
    
    /* –î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏ - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å 1-2-4-3 */
    @keyframes pulse-desktop-1 {
        0%, 25% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
        12.5%, 20% {
            transform: scale(1.08);
            box-shadow: 0 20px 40px var(--shadow-strong);
        }
        25%, 100% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
    }
    
    @keyframes pulse-desktop-2 {
        0%, 25% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
        37.5%, 45% {
            transform: scale(1.08);
            box-shadow: 0 20px 40px var(--shadow-strong);
        }
        50%, 100% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
    }
    
    @keyframes pulse-desktop-3 {
        0%, 75% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
        87.5%, 95% {
            transform: scale(1.08);
            box-shadow: 0 20px 40px var(--shadow-strong);
        }
        100% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
    }
    
    @keyframes pulse-desktop-4 {
        0%, 50% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
        62.5%, 70% {
            transform: scale(1.08);
            box-shadow: 0 20px 40px var(--shadow-strong);
        }
        75%, 100% {
            transform: scale(1);
            box-shadow: 0 10px 30px var(--shadow-color);
        }
    }
}

.floating-elements {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
}

.floating-circle {
    position: absolute;
    border-radius: 50%;
    background: var(--float-color);
    animation: float 6s ease-in-out infinite;
}

.floating-circle:nth-child(1) {
    width: 80px;
    height: 80px;
    top: 20%;
    left: 10%;
    animation-delay: 0s;
}

.floating-circle:nth-child(2) {
    width: 60px;
    height: 60px;
    top: 60%;
    right: 15%;
    animation-delay: 2s;
}

.floating-circle:nth-child(3) {
    width: 40px;
    height: 40px;
    bottom: 20%;
    left: 20%;
    animation-delay: 4s;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}


/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 576px) {
    .main-container {
        margin: 1rem;
        padding: 1rem;
    }
    
    .card-modern {
        margin-bottom: 1rem;
    }
}

@media (min-width: 576px) {
    .fa-sm-3x {
        font-size: 3em !important;
    }
    .fs-sm-5 {
        font-size: 1.25rem !important;
    }
}


</style>


<div class="floating-elements">
    <div class="floating-circle"></div>
    <div class="floating-circle"></div>
    <div class="floating-circle"></div>
</div>


<div class="container">
    <div class="main-container">
        <div class="text-center mb-5">
            <h1 class="hero-title display-4">
                <i class="fas fa-trophy me-3"></i>Quick Score
            </h1>
            
            <div class="d-flex gap-2 justify-content-center flex-wrap">
                <button class="btn btn-outline-secondary btn-sm rounded-pill" onclick="adminLogin()" title="–í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–∏—Å—Ç–µ–º—ã" style="opacity: 0.4; border-color: rgba(0,0,0,0.1); color: rgba(0,0,0,0.3);">
                    <i class="fas fa-user-shield"></i>
                </button>
                <button class="btn btn-gradient btn-sm rounded-pill" onclick="openReferee()" title="–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—É–¥–µ–π—Å—Ç–≤–∞">
                    <i class="fas fa-whistle me-2"></i>–°—É–¥–µ–π—Å—Ç–≤–æ
                </button>
            </div>
        </div>
        
        <div class="row g-4">
            <!-- 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞ -->
            <div class="col-6 col-sm-6">
                <div class="card card-modern h-100 pulse-animation pulse-delay-1" onclick="window.location.href='{{ url_for('request_token') }}'">
                    <div class="card-body text-center p-3 p-sm-4">
                        <div class="mb-2 mb-sm-3">
                            <div class="role-icon">üîë</div>
                        </div>
                        <h4 class="card-title card-title-mobile">–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å</h4>
                        <p class="card-text text-muted small d-none d-sm-block">
                            –ü–æ–ª—É—á–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–æ–º
                        </p>
                        <div class="mt-2 mt-sm-3 d-flex align-items-center justify-content-center" style="height: 35px; font-size: 0.8rem;">
                            <i class="fas fa-key me-1 me-sm-2"></i><span class="d-none d-sm-inline">–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å</span><span class="d-sm-none">–ü–∞—Ä–æ–ª—å</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 2. –í—Ö–æ–¥ –∫–∞–∫ –∞–¥–º–∏–Ω —Ç—É—Ä–Ω–∏—Ä–∞ -->
            <div class="col-6 col-sm-6">
                <div class="card card-modern h-100 pulse-animation pulse-delay-2" onclick="window.location.href='{{ url_for('admin_tournament') }}'">
                    <div class="card-body text-center p-3 p-sm-4">
                        <div class="mb-2 mb-sm-3">
                            <div class="role-icon" style="display: flex; gap: 0.3rem; justify-content: center; align-items: center; flex-wrap: wrap;">
                                <span style="font-size: 0.8em;">üè∏</span>
                                <span style="font-size: 0.8em;">üèê</span>
                            </div>
                        </div>
                        <h4 class="card-title card-title-mobile">–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Ç—É—Ä–Ω–∏—Ä–æ–≤</h4>
                        <p class="card-text text-muted small d-none d-sm-block">
                            –í–æ–π–¥–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é email –∏ –ø–∞—Ä–æ–ª—è
                        </p>
                        <div class="mt-2 mt-sm-3 d-flex align-items-center justify-content-center" style="height: 35px; font-size: 0.8rem;">
                            <i class="fas fa-sign-in-alt me-1 me-sm-2"></i><span class="d-none d-sm-inline">–í–æ–π—Ç–∏ —Å –ø–∞—Ä–æ–ª–µ–º</span><span class="d-sm-none">–í–æ–π—Ç–∏ —Å –ø–∞—Ä–æ–ª–µ–º</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 3. –í—Ö–æ–¥ –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫ —Ç—É—Ä–Ω–∏—Ä–∞ -->
            <div class="col-6 col-sm-6">
                <div class="card card-modern h-100 pulse-animation pulse-delay-3" onclick="showParticipantLogin()">
                    <div class="card-body text-center p-3 p-sm-4">
                        <div class="mb-2 mb-sm-3">
                            <div class="role-icon">
                                <img src="/static/icons/boy_1.png" alt="–î–ª—è –∏–≥—Ä–æ–∫–æ–≤" style="width: 96px; height: 96px; object-fit: contain; background: transparent;">
                            </div>
                        </div>
                        <h4 class="card-title card-title-mobile">–î–ª—è –ò–≥—Ä–æ–∫–æ–≤</h4>
                        <p class="card-text text-muted small d-none d-sm-block">
                            –î–ª—è –ò–≥—Ä–æ–∫–æ–≤
                        </p>
                        <div class="mt-2 mt-sm-3 d-flex align-items-center justify-content-center" style="height: 35px; font-size: 0.8rem;">
                            <i class="fas fa-user me-1 me-sm-2"></i><span class="d-none d-sm-inline">–í–æ–π—Ç–∏ –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫</span><span class="d-sm-none">–î–ª—è –ò–≥—Ä–æ–∫–æ–≤</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 4. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ -->
            <div class="col-6 col-sm-6">
                <div class="card card-modern h-100 pulse-animation pulse-delay-4" onclick="window.location.href='{{ url_for('tournaments_list') }}'">
                    <div class="card-body text-center p-3 p-sm-4">
                        <div class="mb-2 mb-sm-3">
                            <div class="role-icon">
                                <img src="/static/icons/spectator.png" alt="–î–ª—è –∑—Ä–∏—Ç–µ–ª–µ–π" style="width: 81.6px; height: 81.6px; object-fit: contain;">
                            </div>
                        </div>
                        <h4 class="card-title card-title-mobile">–î–ª—è –ó—Ä–∏—Ç–µ–ª–µ–π</h4>
                        <p class="card-text text-muted small d-none d-sm-block">
                            –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã
                        </p>
                        <div class="mt-2 mt-sm-3 d-flex align-items-center justify-content-center" style="height: 35px; font-size: 0.8rem;">
                            <i class="fas fa-eye me-1 me-sm-2"></i><span class="d-none d-sm-inline">–°–º–æ—Ç—Ä–µ—Ç—å —Ç—É—Ä–Ω–∏—Ä—ã</span><span class="d-sm-none">–¢—É—Ä–Ω–∏—Ä—ã</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card card-modern">
                    <div class="card-body text-center">
                        <h5 class="card-title">
                            <i class="fas fa-info-circle me-2 icon-gradient"></i>
                            –ü—ç—Ç –ø—Ä–æ–µ–∫—Ç
                        </h5>
                        <p class="card-text mb-3">
                            –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª—é–±–∏—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ —Å –º–∞—Ç—á–∞–º–∏ –∏–∑ 3-—Ö —Å–µ—Ç–æ–≤. 
                            –ù–∞–ø—Ä–∏–º–µ—Ä: –Ω–∞—Å—Ç–æ–ª—å–Ω–æ–≥–æ —Ç–µ–Ω–Ω–∏—Å–∞, –±–∞–¥–º–∏–Ω—Ç–æ–Ω–∞, –≤–æ–ª–µ–π–±–æ–ª–∞ –∏ ...
                        </p>
                        <button class="btn btn-sm rounded-pill" onclick="openContactForm()" style="border: 1px solid var(--primary-color); color: var(--primary-color);">
                            <i class="fas fa-envelope me-2"></i>–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function adminLogin() {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Ö–æ–¥–∞ –∞–¥–º–∏–Ω–∞
    const modal = document.createElement('div');
    modal.className = 'modal fade';
    modal.id = 'adminLoginModal';
    modal.innerHTML = `
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-user-shield me-2"></i>–í—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    
                    <form id="adminLoginForm">
                        <div class="mb-3">
                            <label for="adminUsername" class="form-label">–õ–æ–≥–∏–Ω</label>
                            <input type="text" class="form-control" id="adminUsername" value="" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">
                        </div>
                        <div class="mb-3">
                            <label for="adminPassword" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="adminPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" value="">
                                <button class="btn btn-outline-secondary" type="button" id="toggleAdminPassword">
                                    <i class="fas fa-eye" id="toggleAdminIcon"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-danger" onclick="performAdminLogin()">
                        <i class="fas fa-sign-in-alt me-2"></i>–í–æ–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    const bsModal = new bootstrap.Modal(modal);
    bsModal.show();
    
    // –£–¥–∞–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è
    modal.addEventListener('hidden.bs.modal', function() {
        document.body.removeChild(modal);
    });
}

        function openReferee() {
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É referee –≤ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–º —Ä–µ–∂–∏–º–µ —Å –æ—á–∏—Å—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö
            window.open('/referee?p1=&p2=&tournament=&clear=true', '_blank', 'width=1920,height=1080,resizable=yes,scrollbars=no,status=no,toolbar=no,menubar=no,location=no,directories=no,fullscreen=yes,titlebar=no');
        }

function performAdminLogin() {
    const password = document.getElementById('adminPassword').value;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    const button = event.target;
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>–í—Ö–æ–¥...';
    button.disabled = true;
    
    // –ü–æ–ª—É—á–∞–µ–º CSRF —Ç–æ–∫–µ–Ω
    const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    fetch('/admin-system-login', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': csrfToken
        },
        body: JSON.stringify({
            username: 'admin',
            password: password
        })
    })
    .then(response => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—Ç–≤–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ JSON
        const contentType = response.headers.get('content-type');
        if (!contentType || !contentType.includes('application/json')) {
            // –ï—Å–ª–∏ –Ω–µ JSON, —á–∏—Ç–∞–µ–º –∫–∞–∫ —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            return response.text().then(text => {
                console.error('–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –Ω–µ JSON –æ—Ç–≤–µ—Ç:', text);
                throw new Error('–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –Ω–µ JSON –æ—Ç–≤–µ—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.');
            });
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            window.location.href = data.redirect_url;
        } else {
            // –û—à–∏–±–∫–∞ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
            button.innerHTML = originalText;
            button.disabled = false;
            alert('–û—à–∏–±–∫–∞: ' + data.message);
            document.getElementById('adminPassword').focus();
        }
    })
    .catch(error => {
        // –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
        button.innerHTML = originalText;
        button.disabled = false;
        console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
        alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message);
        document.getElementById('adminPassword').focus();
    });
}


function showParticipantLogin() {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Ö–æ–¥–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞
    const modal = document.createElement('div');
    modal.className = 'modal fade';
    modal.id = 'participantLoginModal';
    modal.innerHTML = `
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-user-check me-2"></i>–í—Ö–æ–¥ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Ç—É—Ä–Ω–∏—Ä–∞
                    </h5>
                    <div class="d-flex gap-2">
                        <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                        <button type="button" class="btn btn-primary btn-sm" onclick="performParticipantLogin()">
                            <i class="fas fa-sign-in-alt me-1"></i>–í–æ–π—Ç–∏
                        </button>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                </div>
                <div class="modal-body">
                    <form id="participantLoginForm">
                        <div class="mb-3">
                            <label for="participantName" class="form-label">–í–∞—à–µ –∏–º—è</label>
                            <input type="text" class="form-control" id="participantName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
                        </div>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>–í—Ö–æ–¥ —É—á–∞—Å—Ç–Ω–∏–∫–∞:</strong><br>
                            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç—É—Ä–Ω–∏—Ä–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —É—á–∞—Å—Ç–≤—É–µ—Ç–µ.
                        </div>
                    </form>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    const bsModal = new bootstrap.Modal(modal);
    bsModal.show();
    
    // –£–¥–∞–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è
    modal.addEventListener('hidden.bs.modal', function() {
        document.body.removeChild(modal);
    });
}

function performParticipantLogin() {
    const name = document.getElementById('participantName').value;
    
    if (!name) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è');
        return;
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    const button = event.target;
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>–í—Ö–æ–¥...';
    button.disabled = true;
    
    // –ü–æ–ª—É—á–∞–µ–º CSRF —Ç–æ–∫–µ–Ω
    const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ —Å–µ—Å—Å–∏–∏ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
    fetch('/participant-login', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'X-CSRFToken': csrfToken
        },
        body: `name=${encodeURIComponent(name)}&csrf_token=${csrfToken}`
    })
    .then(response => {
        if (response.ok) {
            // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—á–∞—Å—Ç–Ω–∏–∫–∞
            window.location.href = '/participant-tournaments';
        } else {
            // –û—à–∏–±–∫–∞ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
            button.innerHTML = originalText;
            button.disabled = false;
            alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
        }
    })
    .catch(error => {
        // –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
        button.innerHTML = originalText;
        button.disabled = false;
        console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
        alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message);
    });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
function toggleAdminPasswordVisibility() {
    const passwordField = document.getElementById('adminPassword');
    const toggleIcon = document.getElementById('toggleAdminIcon');
    
    if (passwordField && toggleIcon) {
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            toggleIcon.classList.remove('fa-eye');
            toggleIcon.classList.add('fa-eye-slash');
        } else {
            passwordField.type = 'password';
            toggleIcon.classList.remove('fa-eye-slash');
            toggleIcon.classList.add('fa-eye');
        }
    }
}

// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
document.addEventListener('DOMContentLoaded', function() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
    const savedTheme = localStorage.getItem('selectedTheme') || 'original-emerald';
    const themeRadio = document.getElementById(`theme-${savedTheme}`);
    if (themeRadio) {
        themeRadio.checked = true;
        changeTheme(savedTheme);
    }
    
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é adminLogin –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
    const originalAdminLogin = window.adminLogin;
    window.adminLogin = function() {
        originalAdminLogin();
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        setTimeout(() => {
            const toggleBtn = document.getElementById('toggleAdminPassword');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', toggleAdminPasswordVisibility);
            }
        }, 100);
    };
});

// –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã —Ç–µ–º—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
function changeTheme(themeName) {
    const root = document.documentElement;
    const theme = themes[themeName];
    
    if (theme) {
        Object.keys(theme).forEach(key => {
            root.style.setProperty(key, theme[key]);
        });
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ç–µ–º—É –≤ localStorage
        localStorage.setItem('selectedTheme', themeName);
    }
}

// –û—á–∏—Å—Ç–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ/–≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
document.addEventListener('DOMContentLoaded', function() {
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –Ω–æ –ù–ï —É–¥–∞–ª—è–µ–º helpModal
    const modals = document.querySelectorAll('.modal');
    modals.forEach(modal => {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º helpModal - –µ–≥–æ –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å, –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –∫–Ω–æ–ø–∫–∏ Help
        if (modal.id === 'helpModal') {
            return;
        }
        
        const bsModal = bootstrap.Modal.getInstance(modal);
        if (bsModal) {
            bsModal.hide();
        }
        // –£–¥–∞–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑ DOM (–∫—Ä–æ–º–µ helpModal)
        if (modal.parentNode) {
            modal.parentNode.removeChild(modal);
        }
    });
    
    // –£–¥–∞–ª—è–µ–º –≤—Å–µ backdrop'—ã
    const backdrops = document.querySelectorAll('.modal-backdrop');
    backdrops.forEach(backdrop => {
        if (backdrop.parentNode) {
            backdrop.parentNode.removeChild(backdrop);
        }
    });
    
    // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å modal-open —Å body
    document.body.classList.remove('modal-open');
    document.body.style.overflow = '';
    document.body.style.paddingRight = '';
});

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏–∏ pageshow (—Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞–∑–∞–¥)
window.addEventListener('pageshow', function(event) {
    // –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ –∫—ç—à–∞ (bfcache)
    if (event.persisted) {
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –Ω–æ –ù–ï —É–¥–∞–ª—è–µ–º helpModal
        const modals = document.querySelectorAll('.modal');
        modals.forEach(modal => {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º helpModal - –µ–≥–æ –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å, –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –∫–Ω–æ–ø–∫–∏ Help
            if (modal.id === 'helpModal') {
                return;
            }
            
            const bsModal = bootstrap.Modal.getInstance(modal);
            if (bsModal) {
                bsModal.hide();
            }
            // –£–¥–∞–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑ DOM (–∫—Ä–æ–º–µ helpModal)
            if (modal.parentNode) {
                modal.parentNode.removeChild(modal);
            }
        });
        
        // –£–¥–∞–ª—è–µ–º –≤—Å–µ backdrop'—ã
        const backdrops = document.querySelectorAll('.modal-backdrop');
        backdrops.forEach(backdrop => {
            if (backdrop.parentNode) {
                backdrop.parentNode.removeChild(backdrop);
            }
        });
        
        // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å modal-open —Å body
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
    }
});

// –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
function openContactForm() {
    const modal = document.createElement('div');
    modal.className = 'modal fade';
    modal.id = 'contactModal';
    modal.innerHTML = `
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-envelope me-2"></i>–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="contactForm">
                        <div class="mb-3">
                            <label for="contactName" class="form-label">–í–∞—à–µ –∏–º—è</label>
                            <input type="text" class="form-control" id="contactName" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactEmail" class="form-label">Email (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                            <input type="email" class="form-control" id="contactEmail" placeholder="–î–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –≤–∞–º">
                        </div>
                        <div class="mb-3">
                            <label for="contactTelegram" class="form-label">Telegram (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                            <input type="text" class="form-control" id="contactTelegram" placeholder="@username –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
                            <small class="text-muted">–£–∫–∞–∂–∏—Ç–µ –≤–∞—à Telegram –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–≤—è–∑–∏</small>
                        </div>
                        <div class="mb-3">
                            <label for="contactSubject" class="form-label">–¢–µ–º–∞</label>
                            <select class="form-select" id="contactSubject" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É...</option>
                                <option value="–í–æ–ø—Ä–æ—Å">–í–æ–ø—Ä–æ—Å</option>
                                <option value="–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</option>
                                <option value="–û—à–∏–±–∫–∞">–°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ</option>
                                <option value="–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å">–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å</option>
                                <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="contactMessage" class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                            <textarea class="form-control" id="contactMessage" rows="4" required></textarea>
                        </div>
                        <div class="alert alert-info" style="font-size: 0.85rem;">
                            <i class="fas fa-info-circle me-1"></i>
                            –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É. –ú—ã —Ü–µ–Ω–∏–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å!
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-gradient" onclick="sendContactForm()">
                        <i class="fas fa-paper-plane me-2"></i>–û—Ç–ø—Ä–∞–≤–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    const bsModal = new bootstrap.Modal(modal);
    bsModal.show();
    
    modal.addEventListener('hidden.bs.modal', function() {
        document.body.removeChild(modal);
    });
}

function sendContactForm() {
    const name = document.getElementById('contactName').value.trim();
    const email = document.getElementById('contactEmail').value.trim();
    const telegram = document.getElementById('contactTelegram').value.trim();
    const subject = document.getElementById('contactSubject').value;
    const message = document.getElementById('contactMessage').value.trim();
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!name || !subject || !message) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
        return;
    }
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    const submitButton = document.querySelector('#contactModal .btn-gradient');
    const originalText = submitButton.innerHTML;
    submitButton.disabled = true;
    submitButton.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>–û—Ç–ø—Ä–∞–≤–∫–∞...';
    
    // –ü–æ–ª—É—á–∞–µ–º CSRF —Ç–æ–∫–µ–Ω
    const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
    
    fetch('/api/contact', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': csrfToken
        },
        body: JSON.stringify({
            name: name,
            email: email || '–ù–µ —É–∫–∞–∑–∞–Ω',
            telegram: telegram || '–ù–µ —É–∫–∞–∑–∞–Ω',
            subject: subject,
            message: message
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('–°–ø–∞—Å–∏–±–æ! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.');
            bootstrap.Modal.getInstance(document.getElementById('contactModal')).hide();
        } else {
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ: ' + (data.error || '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ'));
            submitButton.disabled = false;
            submitButton.innerHTML = originalText;
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
        submitButton.disabled = false;
        submitButton.innerHTML = originalText;
    });
}

</script>

{% endblock %}

