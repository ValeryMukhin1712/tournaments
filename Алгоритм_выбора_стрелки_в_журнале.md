# üéØ –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–µ–ª–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–µ–π –º–µ—Å—Ç–æ –ø–æ–¥–∞—á–∏ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ –∂—É—Ä–Ω–∞–ª

## üìã –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–°—Ç—Ä–µ–ª–∫–∞ –≤ –∂—É—Ä–Ω–∞–ª–µ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∞—á–∏** (–≤–µ—Ä—Ö –∏–ª–∏ –Ω–∏–∑) –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–æ–∑—ã–≥—Ä—ã—à–∞. –≠—Ç–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–¥–∞—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –Ω–∞ –∫–æ—Ä—Ç–µ.

**–¢–∏–ø—ã —Å—Ç—Ä–µ–ª–æ–∫:**
- **‚Üó** (—Ä–æ–∑–æ–≤–∞—è, `#ff69b4`) - —Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö-–≤–ø—Ä–∞–≤–æ, –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥–∞—á—É –∏–∑ –≤–µ—Ä—Ö–Ω–µ–π –ø–æ–∑–∏—Ü–∏–∏
- **‚Üò** (–≥–æ–ª—É–±–∞—è, `#00bfff`) - —Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑-–≤–ø—Ä–∞–≤–æ, –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥–∞—á—É –∏–∑ –Ω–∏–∂–Ω–µ–π –ø–æ–∑–∏—Ü–∏–∏

## üî¢ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

- `rally.score` - —Å—á—ë—Ç **–ü–û–°–õ–ï** —Ä–æ–∑—ã–≥—Ä—ã—à–∞ (—Ñ–æ—Ä–º–∞—Ç "X:Y")
- `rally.server_won` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–∑—ã–≥—Ä—ã—à–∞ (true = –ø–æ–¥–∞—é—â–∏–π –≤—ã–∏–≥—Ä–∞–ª, false = –ø—Ä–æ–∏–≥—Ä–∞–ª)
- `rally.server_name` - –∏–º—è –ø–æ–¥–∞—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
- `rally.receiver_name` - –∏–º—è –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
- `rally.swap_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–º–µ–Ω –ø–æ–ª–æ–≤–∏–Ω –∫–æ—Ä—Ç–∞ (–≤–ª–∏—è–µ—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é —Å—á—ë—Ç–∞)
- `scoreBefore` - —Å—á—ë—Ç **–î–û** —Ä–æ–∑—ã–≥—Ä—ã—à–∞ (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è)

## üìä –®–∞–≥ 1: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞ –î–û —Ä–æ–∑—ã–≥—Ä—ã—à–∞

–ü–µ—Ä–µ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–µ–ª–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã—á–∏—Å–ª–∏—Ç—å —Å—á—ë—Ç **–î–û** —Ä–æ–∑—ã–≥—Ä—ã—à–∞, —Ç–∞–∫ –∫–∞–∫ —Å—Ç—Ä–µ–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç—Ä–∞–∂–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–æ–¥–∞—á–∏ **–Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞**.

### –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è:

```javascript
// 1. –ü–∞—Ä—Å–∏–º —Å—á—ë—Ç –ü–û–°–õ–ï —Ä–æ–∑—ã–≥—Ä—ã—à–∞
const scoreParts = rally.score.split(':');
let scoreAfterLeft = parseInt(scoreParts[0]) || 0;   // –õ–µ–≤—ã–π —Å—á—ë—Ç –ø–æ—Å–ª–µ
let scoreAfterRight = parseInt(scoreParts[1]) || 0;   // –ü—Ä–∞–≤—ã–π —Å—á—ë—Ç –ø–æ—Å–ª–µ

// 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫–æ–π —Å—á—ë—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç participant1 –Ω–∞ –æ—Å–Ω–æ–≤–µ swap_count
let participant1Score, participant2Score;
if (swapCount % 2 === 0) {
    // –ß—ë—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–º–µ–Ω: –ª–µ–≤—ã–π —Å—á—ë—Ç ‚Üí participant1, –ø—Ä–∞–≤—ã–π ‚Üí participant2
    participant1Score = scoreAfterLeft;
    participant2Score = scoreAfterRight;
} else {
    // –ù–µ—á—ë—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–º–µ–Ω: –ø—Ä–∞–≤—ã–π —Å—á—ë—Ç ‚Üí participant1, –ª–µ–≤—ã–π ‚Üí participant2
    participant1Score = scoreAfterRight;
    participant2Score = scoreAfterLeft;
}

// 3. –í—ã—á–∏—Å–ª—è–µ–º —Å—á—ë—Ç –î–û —Ä–æ–∑—ã–≥—Ä—ã—à–∞
if (rally.server_won) {
    // –í—ã–∏–≥—Ä–∞–ª –ø–æ–¥–∞—é—â–∏–π - –µ–≥–æ —Å—á—ë—Ç —É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ 1
    if (isServerParticipant1) {
        participant1Score = Math.max(0, participant1Score - 1);
    } else if (isServerParticipant2) {
        participant2Score = Math.max(0, participant2Score - 1);
    }
} else {
    // –í—ã–∏–≥—Ä–∞–ª –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π - –µ–≥–æ —Å—á—ë—Ç —É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ 1
    if (isReceiverParticipant1) {
        participant1Score = Math.max(0, participant1Score - 1);
    } else if (isReceiverParticipant2) {
        participant2Score = Math.max(0, participant2Score - 1);
    }
}

// 4. –§–æ—Ä–º–∏—Ä—É–µ–º —Å—á—ë—Ç –î–û —Ä–æ–∑—ã–≥—Ä—ã—à–∞ —Å —É—á—ë—Ç–æ–º swap_count
if (swapCount % 2 === 0) {
    scoreBefore = `${participant1Score}:${participant2Score}`;
} else {
    scoreBefore = `${participant2Score}:${participant1Score}`;
}
```

### –ü—Ä–∏–º–µ—Ä—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏—è:

**–ü—Ä–∏–º–µ—Ä 1:**
- –°—á—ë—Ç –ü–û–°–õ–ï: `2:1`
- –ü–æ–¥–∞—é—â–∏–π: participant1 (—Å–∏–Ω–∏–π)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤—ã–∏–≥—Ä–∞–ª (server_won = true)
- swap_count = 0 (—á—ë—Ç–Ω–æ–µ)

1. `participant1Score = 2`, `participant2Score = 1` (swap_count % 2 === 0)
2. –ü–æ–¥–∞—é—â–∏–π –≤—ã–∏–≥—Ä–∞–ª ‚Üí `participant1Score = 2 - 1 = 1`
3. –°—á—ë—Ç –î–û: `1:1`

**–ü—Ä–∏–º–µ—Ä 2:**
- –°—á—ë—Ç –ü–û–°–õ–ï: `3:2`
- –ü–æ–¥–∞—é—â–∏–π: participant2 (–∫—Ä–∞—Å–Ω—ã–π)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–æ–∏–≥—Ä–∞–ª (server_won = false)
- swap_count = 0 (—á—ë—Ç–Ω–æ–µ)

1. `participant1Score = 3`, `participant2Score = 2` (swap_count % 2 === 0)
2. –ü—Ä–∏–Ω–∏–º–∞—é—â–∏–π (participant1) –≤—ã–∏–≥—Ä–∞–ª ‚Üí `participant1Score = 3 - 1 = 2`
3. –°—á—ë—Ç –î–û: `2:2`

## üé® –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–∞—é—â–µ–≥–æ

–ö–æ–º–∞–Ω–¥–∞ –ø–æ–¥–∞—é—â–µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ü–≤–µ—Ç—É –µ–≥–æ –∏–º–µ–Ω–∏:

```javascript
const serverColor = getParticipantColor(rally.server_name);
const isParticipant1 = serverColor === '#007bff'; // —Å–∏–Ω–∏–π = participant1
const isParticipant2 = serverColor === '#dc3545'; // –∫—Ä–∞—Å–Ω—ã–π = participant2
```

**–ü—Ä–∞–≤–∏–ª–æ:**
- –°–∏–Ω–∏–π —Ü–≤–µ—Ç (`#007bff`) ‚Üí participant1 (—Å–∏–Ω—è—è –∫–æ–º–∞–Ω–¥–∞)
- –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç (`#dc3545`) ‚Üí participant2 (–∫—Ä–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞)

## üßÆ –®–∞–≥ 3: –í—ã–±–æ—Ä —á–∞—Å—Ç–∏ —Å—á—ë—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–∞—é—â–µ–≥–æ, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —á–∞—Å—Ç—å —Å—á—ë—Ç–∞:

```javascript
// –ü–∞—Ä—Å–∏–º —Å—á—ë—Ç –î–û —Ä–æ–∑—ã–≥—Ä—ã—à–∞
const scoreParts = scoreBefore.split(':');
const leftScore = parseInt(scoreParts[0]) || 0;   // –õ–µ–≤—ã–π —Å—á—ë—Ç
const rightScore = parseInt(scoreParts[1]) || 0;   // –ü—Ä–∞–≤—ã–π —Å—á—ë—Ç

// –í—ã–±–∏—Ä–∞–µ–º –Ω—É–∂–Ω—É—é —á–∞—Å—Ç—å —Å—á—ë—Ç–∞
if (isParticipant1) {
    // –î–ª—è —Å–∏–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –ª–µ–≤—É—é —á–∞—Å—Ç—å —Å—á—ë—Ç–∞
    teamScore = leftScore;
} else if (isParticipant2) {
    // –î–ª—è –∫—Ä–∞—Å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤—É—é —á–∞—Å—Ç—å —Å—á—ë—Ç–∞
    teamScore = rightScore;
}
```

**–ü—Ä–∞–≤–∏–ª–æ:**
- **participant1 (—Å–∏–Ω–∏–π)** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ª–µ–≤–∞—è —á–∞—Å—Ç—å** —Å—á—ë—Ç–∞ (`leftScore`)
- **participant2 (–∫—Ä–∞—Å–Ω—ã–π)** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ø—Ä–∞–≤–∞—è —á–∞—Å—Ç—å** —Å—á—ë—Ç–∞ (`rightScore`)

## üéØ –®–∞–≥ 4: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–µ–ª–∫–∏

–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:

```javascript
// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —á–∏—Å–ª–æ (1 –∏–ª–∏ 0)
const resultValue = rally.server_won ? 1 : 0; // 1 –µ—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–ª, 0 –µ—Å–ª–∏ –ø—Ä–æ–∏–≥—Ä–∞–ª

// –í—ã—á–∏—Å–ª—è–µ–º —á—ë—Ç–Ω–æ—Å—Ç—å
let isEven;
if (isParticipant1) {
    // –î–ª—è —Å–∏–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã: (–ª–µ–≤–∞—è —á–∞—Å—Ç—å —Å—á—ë—Ç–∞ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç) % 2 === 0
    isEven = (leftScore + resultValue) % 2 === 0;
} else if (isParticipant2) {
    // –î–ª—è –∫—Ä–∞—Å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã: (–ø—Ä–∞–≤–∞—è —á–∞—Å—Ç—å —Å—á—ë—Ç–∞ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç) % 2 === 0
    isEven = (rightScore + resultValue) % 2 === 0;
}

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç—Ä–µ–ª–∫—É
const arrow = isEven ? '‚Üó' : '‚Üò';  // –ß—ë—Ç–Ω–æ–µ ‚Üí ‚Üó, –Ω–µ—á—ë—Ç–Ω–æ–µ ‚Üí ‚Üò
const color = isEven ? '#ff69b4' : '#00bfff'; // —Ä–æ–∑–æ–≤—ã–π –¥–ª—è ‚Üó, –≥–æ–ª—É–±–æ–π –¥–ª—è ‚Üò
```

**–§–æ—Ä–º—É–ª–∞:**
```
isEven = (teamScore + resultValue) % 2 === 0
```

–ì–¥–µ:
- `teamScore` - —Å—á—ë—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–∞—é—â–µ–≥–æ **–î–û** —Ä–æ–∑—ã–≥—Ä—ã—à–∞
- `resultValue` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–∑—ã–≥—Ä—ã—à–∞ (1 = –≤—ã–∏–≥—Ä–∞–ª, 0 = –ø—Ä–æ–∏–≥—Ä–∞–ª)

**–ü—Ä–∞–≤–∏–ª–æ:**
- –ï—Å–ª–∏ `isEven === true` ‚Üí —Å—Ç—Ä–µ–ª–∫–∞ **‚Üó** (—Ä–æ–∑–æ–≤–∞—è, –≤–µ—Ä—Ö–Ω—è—è –ø–æ–∑–∏—Ü–∏—è)
- –ï—Å–ª–∏ `isEven === false` ‚Üí —Å—Ç—Ä–µ–ª–∫–∞ **‚Üò** (–≥–æ–ª—É–±–∞—è, –Ω–∏–∂–Ω—è—è –ø–æ–∑–∏—Ü–∏—è)

## üìä –ü—Ä–∏–º–µ—Ä—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ç—Ä–µ–ª–∫–∏

### –ü—Ä–∏–º–µ—Ä 1: –°–∏–Ω—è—è –∫–æ–º–∞–Ω–¥–∞, –≤—ã–∏–≥—Ä–∞–ª–∞

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°—á—ë—Ç –î–û: `2:1`
- –ü–æ–¥–∞—é—â–∏–π: participant1 (—Å–∏–Ω–∏–π)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤—ã–∏–≥—Ä–∞–ª (resultValue = 1)

**–í—ã—á–∏—Å–ª–µ–Ω–∏–µ:**
1. –ö–æ–º–∞–Ω–¥–∞: participant1 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `leftScore = 2`
2. –§–æ—Ä–º—É–ª–∞: `(2 + 1) % 2 = 3 % 2 = 1` (–Ω–µ—á—ë—Ç–Ω–æ–µ)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç: **‚Üò** (–≥–æ–ª—É–±–∞—è —Å—Ç—Ä–µ–ª–∫–∞, –Ω–∏–∂–Ω—è—è –ø–æ–∑–∏—Ü–∏—è)

### –ü—Ä–∏–º–µ—Ä 2: –°–∏–Ω—è—è –∫–æ–º–∞–Ω–¥–∞, –ø—Ä–æ–∏–≥—Ä–∞–ª–∞

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°—á—ë—Ç –î–û: `2:1`
- –ü–æ–¥–∞—é—â–∏–π: participant1 (—Å–∏–Ω–∏–π)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–æ–∏–≥—Ä–∞–ª (resultValue = 0)

**–í—ã—á–∏—Å–ª–µ–Ω–∏–µ:**
1. –ö–æ–º–∞–Ω–¥–∞: participant1 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `leftScore = 2`
2. –§–æ—Ä–º—É–ª–∞: `(2 + 0) % 2 = 2 % 2 = 0` (—á—ë—Ç–Ω–æ–µ)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç: **‚Üó** (—Ä–æ–∑–æ–≤–∞—è —Å—Ç—Ä–µ–ª–∫–∞, –≤–µ—Ä—Ö–Ω—è—è –ø–æ–∑–∏—Ü–∏—è)

### –ü—Ä–∏–º–µ—Ä 3: –ö—Ä–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –≤—ã–∏–≥—Ä–∞–ª–∞

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°—á—ë—Ç –î–û: `2:3`
- –ü–æ–¥–∞—é—â–∏–π: participant2 (–∫—Ä–∞—Å–Ω—ã–π)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤—ã–∏–≥—Ä–∞–ª (resultValue = 1)

**–í—ã—á–∏—Å–ª–µ–Ω–∏–µ:**
1. –ö–æ–º–∞–Ω–¥–∞: participant2 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `rightScore = 3`
2. –§–æ—Ä–º—É–ª–∞: `(3 + 1) % 2 = 4 % 2 = 0` (—á—ë—Ç–Ω–æ–µ)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç: **‚Üó** (—Ä–æ–∑–æ–≤–∞—è —Å—Ç—Ä–µ–ª–∫–∞, –≤–µ—Ä—Ö–Ω—è—è –ø–æ–∑–∏—Ü–∏—è)

### –ü—Ä–∏–º–µ—Ä 4: –ö—Ä–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –ø—Ä–æ–∏–≥—Ä–∞–ª–∞

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°—á—ë—Ç –î–û: `2:3`
- –ü–æ–¥–∞—é—â–∏–π: participant2 (–∫—Ä–∞—Å–Ω—ã–π)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–æ–∏–≥—Ä–∞–ª (resultValue = 0)

**–í—ã—á–∏—Å–ª–µ–Ω–∏–µ:**
1. –ö–æ–º–∞–Ω–¥–∞: participant2 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `rightScore = 3`
2. –§–æ—Ä–º—É–ª–∞: `(3 + 0) % 2 = 3 % 2 = 1` (–Ω–µ—á—ë—Ç–Ω–æ–µ)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç: **‚Üò** (–≥–æ–ª—É–±–∞—è —Å—Ç—Ä–µ–ª–∫–∞, –Ω–∏–∂–Ω—è—è –ø–æ–∑–∏—Ü–∏—è)

## üîÄ –í–ª–∏—è–Ω–∏–µ swap_count

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `swap_count` –≤–ª–∏—è–µ—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –ª–µ–≤–æ–≥–æ –∏ –ø—Ä–∞–≤–æ–≥–æ —Å—á—ë—Ç–∞:

```javascript
if (swapCount % 2 === 0) {
    // –ß—ë—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–º–µ–Ω:
    // –ª–µ–≤—ã–π —Å—á—ë—Ç ‚Üí participant1 (—Å–∏–Ω–∏–π)
    // –ø—Ä–∞–≤—ã–π —Å—á—ë—Ç ‚Üí participant2 (–∫—Ä–∞—Å–Ω—ã–π)
    participant1Score = scoreAfterLeft;
    participant2Score = scoreAfterRight;
} else {
    // –ù–µ—á—ë—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–º–µ–Ω:
    // –ø—Ä–∞–≤—ã–π —Å—á—ë—Ç ‚Üí participant1 (—Å–∏–Ω–∏–π)
    // –ª–µ–≤—ã–π —Å—á—ë—Ç ‚Üí participant2 (–∫—Ä–∞—Å–Ω—ã–π)
    participant1Score = scoreAfterRight;
    participant2Score = scoreAfterLeft;
}
```

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—á—ë—Ç–∞ –î–û —Ä–æ–∑—ã–≥—Ä—ã—à–∞, —Å—á—ë—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ —Å —É—á—ë—Ç–æ–º `swap_count`:

```javascript
if (swapCount % 2 === 0) {
    scoreBefore = `${participant1Score}:${participant2Score}`;
} else {
    scoreBefore = `${participant2Score}:${participant1Score}`;
}
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `getArrowDirection` –ª–µ–≤–∞—è —á–∞—Å—Ç—å —Å—á—ë—Ç–∞ –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç participant1, –∞ –ø—Ä–∞–≤–∞—è - participant2, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–º–µ–Ω.

## üìù –ò—Ç–æ–≥–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞

### –ü–æ–ª–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:

```
1. –í—ã—á–∏—Å–ª–∏—Ç—å —Å—á—ë—Ç –î–û —Ä–æ–∑—ã–≥—Ä—ã—à–∞:
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å participant1Score –∏ participant2Score –Ω–∞ –æ—Å–Ω–æ–≤–µ swap_count
   - –ï—Å–ª–∏ –ø–æ–¥–∞—é—â–∏–π –≤—ã–∏–≥—Ä–∞–ª ‚Üí —É–º–µ–Ω—å—à–∏—Ç—å –µ–≥–æ —Å—á—ë—Ç –Ω–∞ 1
   - –ï—Å–ª–∏ –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –≤—ã–∏–≥—Ä–∞–ª ‚Üí —É–º–µ–Ω—å—à–∏—Ç—å –µ–≥–æ —Å—á—ë—Ç –Ω–∞ 1
   - –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å scoreBefore —Å —É—á—ë—Ç–æ–º swap_count

2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –ø–æ–¥–∞—é—â–µ–≥–æ:
   - –ü–æ —Ü–≤–µ—Ç—É –∏–º–µ–Ω–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å participant1 –∏–ª–∏ participant2

3. –í—ã–±—Ä–∞—Ç—å —á–∞—Å—Ç—å —Å—á—ë—Ç–∞:
   - participant1 ‚Üí leftScore
   - participant2 ‚Üí rightScore

4. –í—ã—á–∏—Å–ª–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∏:
   - resultValue = server_won ? 1 : 0
   - isEven = (teamScore + resultValue) % 2 === 0
   - –ï—Å–ª–∏ isEven ‚Üí ‚Üó (—Ä–æ–∑–æ–≤–∞—è)
   - –ï—Å–ª–∏ –Ω–µ isEven ‚Üí ‚Üò (–≥–æ–ª—É–±–∞—è)
```

## ‚úÖ –õ–æ–≥–∏–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞–º –±–∞–¥–º–∏–Ω—Ç–æ–Ω–∞:
- ‚úÖ –°—Ç—Ä–µ–ª–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ø–æ–¥–∞—á–∏ **–Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—á—ë—Ç **–î–û** —Ä–æ–∑—ã–≥—Ä—ã—à–∞, –∞ –Ω–µ –ø–æ—Å–ª–µ
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–∑—ã–≥—Ä—ã—à–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è `swap_count` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Å—á—ë—Ç–∞
- ‚úÖ –†–æ–∑–æ–≤–∞—è —Å—Ç—Ä–µ–ª–∫–∞ (‚Üó) = –≤–µ—Ä—Ö–Ω—è—è –ø–æ–∑–∏—Ü–∏—è, –≥–æ–ª—É–±–∞—è (‚Üò) = –Ω–∏–∂–Ω—è—è –ø–æ–∑–∏—Ü–∏—è

## üé® –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ

–í –∂—É—Ä–Ω–∞–ª–µ —Å—Ç—Ä–µ–ª–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º –ø–æ–¥–∞—é—â–µ–≥–æ:

```html
<strong style="font-style: italic; color: #007bff;">–ò–º—è –∏–≥—Ä–æ–∫–∞</strong> 
<span style="font-style: italic; color: #ff69b4; font-size: 80%; font-weight: 900;">‚Üó</span>
```

- –ò–º—è –ø–æ–¥–∞—é—â–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **–∂–∏—Ä–Ω—ã–º –∫—É—Ä—Å–∏–≤–æ–º** —Å —Ü–≤–µ—Ç–æ–º –µ–≥–æ –∫–æ–º–∞–Ω–¥—ã
- –°—Ç—Ä–µ–ª–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **–∫—É—Ä—Å–∏–≤–æ–º** —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ü–≤–µ—Ç–æ–º (—Ä–æ–∑–æ–≤—ã–π –∏–ª–∏ –≥–æ–ª—É–±–æ–π)
- –†–∞–∑–º–µ—Ä —Å—Ç—Ä–µ–ª–∫–∏: **80%** –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
- –¢–æ–ª—â–∏–Ω–∞ —Å—Ç—Ä–µ–ª–∫–∏ —É–≤–µ–ª–∏—á–µ–Ω–∞ —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `text-shadow` –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏

