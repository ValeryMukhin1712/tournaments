# üè∏ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º Referee

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Referee (—Å—É–¥–µ–π—Å—Ç–≤–æ –±–∞–¥–º–∏–Ω—Ç–æ–Ω–∞) —Å –æ—Å–Ω–æ–≤–Ω—ã–º —Ç—É—Ä–Ω–∏—Ä–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Referee –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Å—Ç–∏ —Å—á–µ—Ç –º–∞—Ç—á–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∫–æ—Ä—Ç–∞.

## üéØ –õ–æ–≥–∏–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∏–º–µ–Ω —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

### –ü—Ä–∞–≤–∏–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–º–µ–Ω:

1. **–ü—Ä–æ—Å—Ç–æ–µ –∏–º—è** (–±–µ–∑ —Ç–∏—Ä–µ):
   - `"–ò–≤–∞–Ω"` ‚Üí –æ–±–∞ –ø–æ–ª—è –∫–æ–º–∞–Ω–¥—ã: `"–ò–≤–∞–Ω"`

2. **–ò–º—è —Å —Ç–∏—Ä–µ**:
   - `"–ò–≤–∞–Ω-–ü–µ—Ç—Ä"` ‚Üí –Ω–∏–∂–Ω–∏–π –∏–≥—Ä–æ–∫: `"–ò–≤–∞–Ω"`, –≤–µ—Ä—Ö–Ω–∏–π –∏–≥—Ä–æ–∫: `"–ü–µ—Ç—Ä"`

3. **–°–º–µ—à–∞–Ω–Ω—ã–µ —Å–ª—É—á–∞–∏**:
   - `"–ê–ª–µ–∫—Å–µ–π"` vs `"–ú–∞—Ä–∏—è-–ê–Ω–Ω–∞"` ‚Üí –ª–µ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞: `"–ê–ª–µ–∫—Å–µ–π"` –≤ –æ–±–æ–∏—Ö –ø–æ–ª—è—Ö, –ø—Ä–∞–≤–∞—è: `"–ú–∞—Ä–∏—è"` (–Ω–∏–∑) –∏ `"–ê–Ω–Ω–∞"` (–≤–µ—Ä—Ö)

4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∏—Ä–µ**:
   - `"–ò–≤–∞–Ω-–ü–µ—Ç—Ä-–°–∏–¥–æ—Ä"` ‚Üí –Ω–∏–∂–Ω–∏–π: `"–ò–≤–∞–Ω"`, –≤–µ—Ä—Ö–Ω–∏–π: `"–ü–µ—Ç—Ä-–°–∏–¥–æ—Ä"`

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª—ã:

- `utils/referee_utils.py` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–º–µ–Ω –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML
- `routes/api.py` - API endpoint `/api/referee/generate`
- `templates/referee_test.html` - —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `test_referee_parsing.py` - —Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### API Endpoint:

```http
POST /api/referee/generate
Content-Type: application/json

{
    "participant1": "–ò–≤–∞–Ω-–ü–µ—Ç—Ä",
    "participant2": "–ú–∞—Ä–∏—è",
    "tournament_name": "–¢—É—Ä–Ω–∏—Ä"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "html": "<!DOCTYPE html>..."
}
```

### –§—É–Ω–∫—Ü–∏–∏:

#### `parse_participant_names(left_name, right_name)`
–ü–∞—Ä—Å–∏—Ç –∏–º–µ–Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è 4 –ø–æ–ª–µ–π –≤ Referee.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
{
    'left_top': str,      # –í–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π –∏–≥—Ä–æ–∫
    'left_bottom': str,   # –ù–∏–∂–Ω–∏–π –ª–µ–≤—ã–π –∏–≥—Ä–æ–∫  
    'right_top': str,     # –í–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π –∏–≥—Ä–æ–∫
    'right_bottom': str   # –ù–∏–∂–Ω–∏–π –ø—Ä–∞–≤—ã–π –∏–≥—Ä–æ–∫
}
```

#### `generate_referee_html(participant1, participant2, tournament_name)`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTML —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
python test_referee_parsing.py
```

### –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
```
http://localhost:5000/referee-test
```

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

1. **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
2. **–û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**
3. **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```html
<!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Referee -->
<button type="button" class="btn btn-success" onclick="openRefereeModal()">
    üè∏ –û—Ç–∫—Ä—ã—Ç—å —Å—É–¥–µ–π—Å—Ç–≤–æ
</button>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div class="modal fade" id="refereeModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-body">
                <iframe id="refereeFrame" width="100%" height="600px"></iframe>
            </div>
        </div>
    </div>
</div>
```

### JavaScript –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:

```javascript
function openRefereeModal() {
    const participant1 = document.getElementById('participant1_name').value;
    const participant2 = document.getElementById('participant2_name').value;
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º Referee —á–µ—Ä–µ–∑ API
    fetch('/api/referee/generate', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            participant1: participant1,
            participant2: participant2,
            tournament_name: '–¢—É—Ä–Ω–∏—Ä'
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            document.getElementById('refereeFrame').srcdoc = data.html;
            new bootstrap.Modal(document.getElementById('refereeModal')).show();
        }
    });
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç Referee
window.addEventListener('message', function(event) {
    if (event.data.type === 'refereeResult') {
        const { scoreLeft, scoreRight } = event.data;
        document.getElementById('sets_score').value = `${scoreLeft}:${scoreRight}`;
        bootstrap.Modal.getInstance(document.getElementById('refereeModal')).hide();
    }
});
```

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Referee

- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ—Ä—Ç —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º —Å—á–µ—Ç–æ–º
- ‚úÖ –í–µ–¥–µ–Ω–∏–µ —Å—á–µ—Ç–∞ –∫–ª–∏–∫–∞–º–∏ –ø–æ –ø–æ–ª–æ–≤–∏–Ω–∞–º –∫–æ—Ä—Ç–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∞—á–µ–π —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
- ‚úÖ –ñ—É—Ä–Ω–∞–ª –ø–æ–¥–∞—á —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (–¥–æ 21 –æ—á–∫–∞)
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–º–µ–Ω—ã –∏ –æ—á–∏—Å—Ç–∫–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ postMessage

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º–µ–Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å —Å—É–¥–µ–π—Å—Ç–≤–æ"
3. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Referee –≤–µ–¥–∏—Ç–µ —Å—á–µ—Ç –º–∞—Ç—á–∞
4. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üîç –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –õ–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π | –õ–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π | –ü—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π | –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π |
|----------------|---------------|--------------|----------------|---------------|
| `"–ò–≤–∞–Ω"` vs `"–ü–µ—Ç—Ä"` | –ò–≤–∞–Ω | –ò–≤–∞–Ω | –ü–µ—Ç—Ä | –ü–µ—Ç—Ä |
| `"–ò–≤–∞–Ω-–ü–µ—Ç—Ä"` vs `"–ú–∞—Ä–∏—è-–ê–Ω–Ω–∞"` | –ü–µ—Ç—Ä | –ò–≤–∞–Ω | –ê–Ω–Ω–∞ | –ú–∞—Ä–∏—è |
| `"–ê–ª–µ–∫—Å–µ–π"` vs `"–ú–∞—Ä–∏—è-–ê–Ω–Ω–∞"` | –ê–ª–µ–∫—Å–µ–π | –ê–ª–µ–∫—Å–µ–π | –ê–Ω–Ω–∞ | –ú–∞—Ä–∏—è |
| `"–ò–≤–∞–Ω-–ü–µ—Ç—Ä-–°–∏–¥–æ—Ä"` vs `"–ú–∞—Ä–∏—è"` | –ü–µ—Ç—Ä-–°–∏–¥–æ—Ä | –ò–≤–∞–Ω | –ú–∞—Ä–∏—è | –ú–∞—Ä–∏—è |

## ‚úÖ –°—Ç–∞—Ç—É—Å

- [x] –ü–∞—Ä—Å–∏–Ω–≥ –∏–º–µ–Ω —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [x] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
- [x] API endpoint –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [x] JavaScript –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ postMessage
- [x] –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç –≤—ã–±–æ—Ä–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞)


