#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Supervisor –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ tournament-admin@45.135.164.202

echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Supervisor..."

# 1. –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
echo "üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:"
sudo supervisorctl status

# 2. –ó–∞–ø—É—Å—Ç–∏–º –ø—Ä–æ—Ü–µ—Å—Å tournaments
echo "üü¢ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å 'tournaments'..."
sudo supervisorctl start tournaments

# 3. –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
echo "üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:"
sudo supervisorctl status

# 4. –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –ø–æ—Ä—Ç 5000 —Å–ª—É—à–∞–µ—Ç—Å—è
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä—Ç 5000:"
timeout 5 bash -c 'until ss -tuln | grep -q :5000; do sleep 1; done && echo "‚úÖ –ü–æ—Ä—Ç 5000 –∞–∫—Ç–∏–≤–µ–Ω"' || echo "‚ö†Ô∏è  –ü–æ—Ä—Ç 5000 –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 5 —Å–µ–∫—É–Ω–¥"

# 5. –ü—Ä–æ–≤–µ—Ä–∏–º –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
echo "üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–æ–≤:"
sudo supervisorctl tail tournaments

echo "‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
