# üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ VDS —Å–µ—Ä–≤–µ—Ä–∞

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
scp check_server_resources.sh deploy@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä:~/check_server_resources.sh
```

2. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
```bash
ssh deploy@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä
chmod +x ~/check_server_resources.sh
~/check_server_resources.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
- –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
- –°–µ—Ç–µ–≤—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ CPU
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä
nproc

# –ú–æ–¥–µ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
grep "model name" /proc/cpuinfo | head -1

# –ó–∞–≥—Ä—É–∑–∫–∞ CPU
top -bn1 | grep "Cpu(s)" | sed "s/.*, *\([0-9.]*\)%* id.*/\1/" | awk '{print 100 - $1}'

# –°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞
uptime
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏ (RAM)
```bash
# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
free -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
free | grep Mem | awk '{printf "%.1f%%\n", ($3/$2) * 100}'

# –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –ø–∞–º—è—Ç–∏
ps aux --sort=-%mem | head -10
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
df -h /

# –†–∞–∑–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
du -sh /home/deploy/* | sort -h
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ç–∏
ifconfig -a

# –ò–ª–∏ —Å ip
ip -s link show

# –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
netstat -tuln
# –∏–ª–∏
ss -tuln
```

## –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

- **RAM**: –º–∏–Ω–∏–º—É–º 1GB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2GB+
- **–î–∏—Å–∫**: –º–∏–Ω–∏–º—É–º 5GB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 10GB+
- **CPU**: –º–∏–Ω–∏–º—É–º 1 —è–¥—Ä–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 —è–¥—Ä–∞
- **–°–µ—Ç—å**: —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ:

- **CPU –∑–∞–≥—Ä—É–∑–∫–∞ > 80%** - –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- **RAM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ > 90%** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –º–∞–ª–æ –ø–∞–º—è—Ç–∏
- **–î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω > 90%** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –º–∞–ª–æ –º–µ—Å—Ç–∞
- **–°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ > –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä** - —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–∞

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

### –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç RAM:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
```bash
sudo systemctl stop tournaments-dev  # –ï—Å–ª–∏ dev –≤–µ—Ä—Å–∏—è –Ω–µ –Ω—É–∂–Ω–∞
```

2. **–£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers –≤ Gunicorn:**
```bash
sudo nano /etc/systemd/system/tournaments.service
# –ò–∑–º–µ–Ω–∏—Ç–µ --workers 4 –Ω–∞ --workers 2
sudo systemctl daemon-reload
sudo systemctl restart tournaments
```

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à:**
```bash
sudo apt clean
sudo apt autoremove
```

### –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ:

1. **–û—á–∏—Å—Ç–∏—Ç–µ –ª–æ–≥–∏:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –∂—É—Ä–Ω–∞–ª–∞
sudo journalctl --vacuum-time=7d

# –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏ Nginx
sudo truncate -s 0 /var/log/nginx/*.log
```

2. **–£–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã:**
```bash
sudo apt autoremove
sudo apt autoclean
```

3. **–û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã:**
```bash
# –ï—Å–ª–∏ –µ—Å—Ç—å –±—ç–∫–∞–ø—ã –ë–î
ls -lh ~/backups/
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã
rm ~/backups/tournament_*.db  # –û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:**
```bash
du -sh ~/quick-score/instance/tournament.db
du -sh ~/quick-score-dev/instance/tournament_dev.db
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ htop (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```bash
sudo apt install htop
htop
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ top:
```bash
top
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞:
```bash
watch -n 5 df -h
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏:
```bash
watch -n 5 free -h
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤:

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
nano ~/check_resources.sh
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
```bash
#!/bin/bash
RAM_USAGE=$(free | grep Mem | awk '{printf "%.0f", ($3/$2) * 100}')
DISK_USAGE=$(df -h / | tail -1 | awk '{print $5}' | sed 's/%//')

if [ "$RAM_USAGE" -gt 90 ] || [ "$DISK_USAGE" -gt 90 ]; then
    echo "–í–ù–ò–ú–ê–ù–ò–ï: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤!"
    echo "RAM: ${RAM_USAGE}%"
    echo "–î–∏—Å–∫: ${DISK_USAGE}%"
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É email –∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
fi
```

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π —á–∞—Å):
```bash
crontab -e
# –î–æ–±–∞–≤—å—Ç–µ:
0 * * * * /home/deploy/check_resources.sh
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
uname -a
lsb_release -a

# –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
uptime

# –†–∞–∑–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
du -sh /home/deploy/*

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | wc -l

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
netstat -tuln | grep LISTEN

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl list-units --type=service --state=running
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–∏—Å–∫–∞:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ hdparm
sudo apt install hdparm

# –¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —á—Ç–µ–Ω–∏—è
sudo hdparm -tT /dev/sda
```

### –¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–µ—Ç–∏:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ speedtest-cli
sudo apt install speedtest-cli

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
speedtest-cli
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –±–æ–ª—å—à–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–ª–∏ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏.

